{% extends 'movies/base.html' %}

{% block content %}
<div class="container mt-4">
    <div class="row">
        <div class="col-md-8">
            <h2>{{ movie.title }}</h2>
            <p><strong>Genres:</strong> {{ movie.genre_names }}</p>
            <p><strong>Main Cast:</strong> {{ movie.main_cast }}</p>
            <p><strong>Overview:</strong> {{ movie.overview }}</p>
            <p><strong>Release Date:</strong> {{ movie.release_date }}</p>
            <p><strong>Average Rating:</strong> {{ movie.vote_average }}</p>
            <p><strong>Vote Count:</strong> {{ movie.vote_count }}</p>
        </div>
        <div class="col-md-4">
            {% if movie.poster_path %}
                <img src="https://image.tmdb.org/t/p/w500{{ movie.poster_path }}" class="img-fluid" alt="{{ movie.title }} poster">
            {% else %}
                <img src="https://via.placeholder.com/300x450?text=No+Image" class="img-fluid" alt="No poster available">
            {% endif %}
        </div>
    </div>
    <hr>
    <h4>Rate this movie:</h4>
    <form method="post">
        {% csrf_token %}
        <div class="form-group">
            <label for="rating">Your Rating (1-5):</label>
            <input type="number" name="rating" id="rating" min="1" max="5" class="form-control" required>
        </div>
        <button type="submit" class="btn btn-primary mt-2">Submit Rating</button>
    </form>
    {% if user_rating %}
        <p class="mt-3">Your previous rating: <strong>{{ user_rating.rating }}</strong></p>
    {% endif %}
</div>
{% endblock %}
